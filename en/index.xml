<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>Ryan&#39;s Janky Website</title>
        <link>https://yearsuns-github-io.vercel.app/en/</link>
        <description>Recent content on Ryan&#39;s Janky Website</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>en-US</language>
        <copyright>Yearsuns</copyright>
        <lastBuildDate>Sat, 02 Aug 2025 14:59:56 +0800</lastBuildDate><atom:link href="https://yearsuns-github-io.vercel.app/en/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>A Deep Understanding of the Fundamental Principles of Uniswap‚Äôs Concentrated Liquidity</title>
        <link>https://yearsuns-github-io.vercel.app/en/p/a-deep-dive-into-the-fundamental-principles-of-uniswaps-concentrated-liquidity/</link>
        <pubDate>Sat, 02 Aug 2025 14:59:56 +0800</pubDate>
        
        <guid>https://yearsuns-github-io.vercel.app/en/p/a-deep-dive-into-the-fundamental-principles-of-uniswaps-concentrated-liquidity/</guid>
        <description>&lt;p&gt;If you know about Uniswap V2, you definitely know that its biggest advantage is ‚Äúfully automated,‚Äù and its biggest problem is also ‚Äúfully automated.‚Äù Once funds enter, they are mechanically distributed across the entire price range from 0 to ‚àû.&lt;/p&gt;
&lt;p&gt;This is supposed to be fair, but extremely inefficient:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Most of the time, assets are ‚Äúsleeping‚Äù far away from the current market price, nobody trades there, and no fees are generated.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Therefore, Uniswap V3 proposed a revolutionary concept: Concentrated Liquidity.&lt;/p&gt;
&lt;p&gt;It allows LPs to ‚Äúconcentrate‚Äù capital within the price range they consider appropriate so that ‚Äúactive money actually works.‚Äù&lt;/p&gt;
&lt;h2 id=&#34;i-what-is-concentrated-liquidity-background-and-the-problem-it-solves&#34;&gt;&lt;strong&gt;I. What is Concentrated Liquidity: Background and the Problem It Solves&lt;/strong&gt;
&lt;/h2&gt;&lt;p&gt;The decentralized trading protocol Uniswap uses the automated market maker (AMM) model. Users don‚Äôt need to place orders or find counterparties ‚Äî simply deposit two tokens into a pool to become a liquidity provider. This model is very simple, but it also brings an unnoticed problem: most liquidity does not actually work.&lt;/p&gt;
&lt;p&gt;To illustrate this, we need to review the mechanism of Uniswap v2.&lt;/p&gt;
&lt;h3 id=&#34;1-traditional-amm-constant-product-and-full-price-range&#34;&gt;&lt;strong&gt;1. Traditional AMM: Constant Product and ‚ÄúFull Price Range‚Äù&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;In v2‚Äôs constant product model, a trading pool maintains a formula:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;x ¬∑ y = k&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Here, x and y are the quantities of two assets in the pool, and k is a constant. No matter how the price fluctuates, this formula always holds.&lt;/p&gt;
&lt;p&gt;But the model implicitly assumes:&lt;br&gt;
&lt;strong&gt;The liquidity of the pool is distributed across the entire price range from 0 to ‚àû.&lt;/strong&gt;&lt;br&gt;
Theoretically, no matter how high or low the price goes, the pool is ‚Äúready‚Äù to provide liquidity.&lt;/p&gt;
&lt;p&gt;The problem: &lt;strong&gt;real prices never go to 0 or infinity&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;In other words, liquidity is passively spread across a ridiculously wide range that will almost never be used.&lt;/p&gt;
&lt;h3 id=&#34;2-liquidity-utilization-problems&#34;&gt;&lt;strong&gt;2. Liquidity Utilization Problems&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;Distributing liquidity across an overly wide range results in a very direct consequence:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Most capital is sleeping.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;In reality, prices tend to fluctuate within a narrow band, so only funds inside that range actually participate in trades. Other funds are just lying around, consuming capital efficiency.&lt;/p&gt;
&lt;p&gt;This leads to two impacts:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;For traders, active depth is limited, causing higher slippage&lt;/li&gt;
&lt;li&gt;For LPs, although much capital is locked, the return is not proportional&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;In other words:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Capital utilization is low.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;3-why-concentrated-liquidity-is-needed&#34;&gt;&lt;strong&gt;3. Why Concentrated Liquidity Is Needed&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;Uniswap v3 introduces Concentrated Liquidity, with the following core idea:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Liquidity should be placed where actual trading happens.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;If the price stays in a certain region for a long time, LPs can concentrate liquidity in that region instead of wasting it on extreme prices that might never occur.&lt;/p&gt;
&lt;p&gt;The effects are significant:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The same capital provides deeper liquidity&lt;/li&gt;
&lt;li&gt;Price impact for large orders is reduced&lt;/li&gt;
&lt;li&gt;Fee revenue increases&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;This essentially changes the AMM from ‚Äúbroad distribution‚Äù to ‚Äúlocally effective distribution.‚Äù&lt;/p&gt;
&lt;h3 id=&#34;4-definition-of-concentrated-liquidity&#34;&gt;&lt;strong&gt;4. Definition of Concentrated Liquidity&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;Strictly speaking, Concentrated Liquidity means:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;LPs only provide liquidity within a self-defined price range \([P_{lower}, P_{upper}]\). Once price moves outside the range, the LP stops participating and stops earning fees.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;That means each LP is no longer just part of a pool, but becomes a ‚Äúconditional liquidity position.‚Äù&lt;/p&gt;
&lt;p&gt;From the contract‚Äôs perspective, the large pool is divided into many segments, and liquidity is placed into each range. Whichever range trades happen within, LPs of that segment earn fees.&lt;/p&gt;
&lt;h3 id=&#34;5-what-problem-does-it-actually-solve&#34;&gt;&lt;strong&gt;5. What Problem Does It Actually Solve&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;In one sentence:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Use the same capital to obtain deeper effective liquidity.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;But specifically, it improves three things:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;Capital Efficiency&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Lower Slippage&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Higher Fee Yield&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;These all come from one fact: liquidity can finally be concentrated rather than being infinitely diluted.&lt;/p&gt;
&lt;h3 id=&#34;6-but-its-not-a-free-optimization&#34;&gt;&lt;strong&gt;6. But It‚Äôs Not a Free Optimization&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;Concentrated liquidity does not change the basic AMM logic but introduces a new dimension: &lt;strong&gt;price range&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;This makes the LP role more strategic, similar to predicting price movement. Therefore, it also introduces a new risk:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;If price moves out of the chosen range, the position becomes single-sided and stops earning.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;To earn more, LPs must take on more management and judgement ‚Äî a typical risk-return tradeoff.&lt;/p&gt;
&lt;h2 id=&#34;ii-how-concentrated-liquidity-works&#34;&gt;&lt;strong&gt;II. How Concentrated Liquidity Works&lt;/strong&gt;
&lt;/h2&gt;&lt;h3 id=&#34;1-inputs-required-to-provide-liquidity&#34;&gt;&lt;strong&gt;1. Inputs Required to Provide Liquidity&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;Suppose we provide liquidity into an ETH/USDC pool, the contract requires:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Token pair: ETH / USDC&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Price range&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;lower price example: 2000 USDC/ETH&lt;/li&gt;
&lt;li&gt;upper price example: 3000 USDC/ETH&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Amount of ETH or USDC provided&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;In other words, we‚Äôre telling the contract three things:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;I want to LP for ETH/USDC&lt;/li&gt;
&lt;li&gt;Within 2000‚Äì3000&lt;/li&gt;
&lt;li&gt;I‚Äôm willing to deposit this amount of tokens&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;2-which-tokens-must-be-deposited&#34;&gt;&lt;strong&gt;2. Which Token(s) Must Be Deposited&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;Suppose current ETH/USDC price is 2500, then the system checks:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;
2000 &amp;lt; 2500 &amp;lt; 3000
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Meaning ‚Äúprice is inside the range.‚Äù&lt;/p&gt;
&lt;p&gt;This is extremely important because it determines which assets we need to provide:&lt;/p&gt;
&lt;h4 id=&#34;three-situations&#34;&gt;Three situations
&lt;/h4&gt;&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;Current Price&lt;/th&gt;
          &lt;th&gt;Required Deposit&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;Inside range&lt;/td&gt;
          &lt;td&gt;Provide both ETH and USDC&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Below range&lt;/td&gt;
          &lt;td&gt;Only USDC&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Above range&lt;/td&gt;
          &lt;td&gt;Only ETH&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Why? Not strategy ‚Äî &lt;strong&gt;pure math&lt;/strong&gt;: AMM models automatically bias towards one asset depending on price.&lt;/p&gt;
&lt;p&gt;Simply put, scarcity determines demand. At low price, the pool needs more USDC; at high price, more ETH.&lt;/p&gt;
&lt;h3 id=&#34;3-understanding-liquidity-l&#34;&gt;&lt;strong&gt;3. Understanding Liquidity (L)&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;Although we deposit ETH/USDC, the contract records a variable L (liquidity unit).&lt;/p&gt;
&lt;p&gt;Key points:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;We deposit assets&lt;/li&gt;
&lt;li&gt;Contract records L&lt;/li&gt;
&lt;li&gt;Earnings are proportional to L&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;In short:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;L is our ‚Äúposition size‚Äù in that price range.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;The amounts of ETH/USDC adjust automatically with price.&lt;/p&gt;
&lt;h3 id=&#34;4-price-range-discretization&#34;&gt;&lt;strong&gt;4. Price Range Discretization&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;We enter ranges in continuous price (e.g., 2000‚Äì3000), but internally the contract uses ticks.&lt;/p&gt;
&lt;p&gt;It converts them to:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;\(tick_{Lower}\)&lt;/li&gt;
&lt;li&gt;\(tick_{Upper}\)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Ticks discretize price boundaries.&lt;/p&gt;
&lt;p&gt;The contract then stores only boundary updates:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;add +L at \(tick_{Lower}\)&lt;/li&gt;
&lt;li&gt;subtract ‚ÄìL at \(tick_{Upper}\)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Active liquidity at current price equals the sum of all netLiquidity values below the current tick.&lt;/p&gt;
&lt;p&gt;For example, if \(tick_{Lower}=100\) and \(tick_{Upper}=200\), the contract records:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;netLiquidity[100] += 10
netLiquidity[200] -= 10
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;If the current price tick is 150, the activeLiquidity equals the sum of all netLiquidity where tick &amp;lt; 150, which is 10.&lt;/p&gt;
&lt;p&gt;If the current price tick is 205, then activeLiquidity equals the sum of all netLiquidity where tick &amp;lt; 205, which is 0.&lt;/p&gt;
&lt;p&gt;Therefore, when the price crosses these ticks, the system knows when to start and when to stop using our liquidity.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Why do we need to discretize price when storing ranges?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;If we simply used linear segmentation, such as slicing the 2000‚Äì3000 range into 1000 parts, each worth 1 USDC, it would seem natural.&lt;/p&gt;
&lt;p&gt;But what if the price range becomes 0.2‚Äì0.3 or even lower? If we still slice it into 1000 segments, each segment would become extremely small, and the overall scale would be highly uneven.&lt;/p&gt;
&lt;p&gt;Furthermore, real token prices can span multiple orders of magnitude, from 0.0000001 to 10,000,000, making uniform segmentation impossible.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;How do we perform discretization?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;We define that each tick corresponds to a price that is a fixed multiple \(r\) of the previous tick. Then, for \(tick+1\), the price \(P_{tick+1}\) satisfies:&lt;/p&gt;
\[
   P_{tick+1} = P_{tick} \times r
\]&lt;p&gt;From which we derive:&lt;/p&gt;
\[
   P_{tick} = P_0 \times r^{tick}
\]&lt;p&gt;If we set \(P_0 = 1\) and \(r=1.0001\), then:&lt;/p&gt;
\[
   P_{tick} = 1.0001^{tick}
\]&lt;p&gt;This means each tick movement corresponds to a 0.01% price change.&lt;/p&gt;
&lt;p&gt;Now we can represent any price using ticks:&lt;/p&gt;
\[
   tick = \log_{1.0001}(P)
\]&lt;p&gt;For example:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;\(P = 0.25\) corresponds to \(tick \approx -13864\)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;\(P = 2500\) corresponds to \(tick \approx 78244\)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Thus, we obtain a uniform tick scale that works for arbitrary token prices (as long as they‚Äôre not negative ü§™)&lt;/p&gt;
&lt;h3 id=&#34;5-storing-liquidity-state&#34;&gt;&lt;strong&gt;5. Storing Liquidity State&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;When we add liquidity, the system issues an NFT that records:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;chosen price range (2000‚Äì3000)&lt;/li&gt;
&lt;li&gt;size of L&lt;/li&gt;
&lt;li&gt;accumulated fees claimable&lt;/li&gt;
&lt;li&gt;current fee status required for future fee calculations&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Therefore:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The LP action is no longer part of the pool itself, but an independent position recorded as an NFT.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;6-position-changes&#34;&gt;&lt;strong&gt;6. Position Changes&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;When price is within the range:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;holds both ETH and USDC&lt;/li&gt;
&lt;li&gt;converts between the two as trades occur&lt;/li&gt;
&lt;li&gt;participates in matching and earns fees&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;If price falls below &lt;strong&gt;2000&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;position becomes entirely USDC&lt;/li&gt;
&lt;li&gt;no longer provides liquidity or earns fees&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;If price exceeds &lt;strong&gt;3000&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;position becomes entirely ETH&lt;/li&gt;
&lt;li&gt;also exits liquidity&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;In other words:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;When ETH rises, the position becomes ETH-heavy; when ETH falls, it becomes USDC-heavy.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;This behavior is not a strategy ‚Äî it is automatically done by the AMM logic.&lt;/p&gt;
&lt;h3 id=&#34;7-fee-settlement&#34;&gt;&lt;strong&gt;7. Fee Settlement&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;When trades occur inside the range (2500 is inside), fees accumulate. Internally, the contract records fees in the feeGrowth variable.&lt;/p&gt;
&lt;p&gt;When withdrawing, the contract does two things:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;returns current holdings (could be ETH+USDC or single-token)&lt;/li&gt;
&lt;li&gt;returns accumulated fees&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;No need to manually claim‚Äîwithdrawal automatically settles everything.&lt;/p&gt;
&lt;h2 id=&#34;iii-main-formula-derivations&#34;&gt;&lt;strong&gt;III. Main Formula Derivations&lt;/strong&gt;
&lt;/h2&gt;&lt;h3 id=&#34;1-official-whitepapers&#34;&gt;&lt;strong&gt;1. Official Whitepapers&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;v2: &lt;a class=&#34;link&#34; href=&#34;https://docs.uniswap.org/whitepaper.pdf&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://docs.uniswap.org/whitepaper.pdf&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;v3: &lt;a class=&#34;link&#34; href=&#34;https://app.uniswap.org/whitepaper-v3.pdf&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://app.uniswap.org/whitepaper-v3.pdf&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;v4: &lt;a class=&#34;link&#34; href=&#34;https://app.uniswap.org/whitepaper-v4.pdf&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://app.uniswap.org/whitepaper-v4.pdf&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;2-basic-formulas&#34;&gt;&lt;strong&gt;2. Basic Formulas&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;Virtual reserve curve (trading model):&lt;/p&gt;
\[
   x \times y = k \tag{1}
\]&lt;p&gt;Liquidity:&lt;/p&gt;
\[
   L = \sqrt{xy} \tag{2}
\]&lt;p&gt;Price:&lt;/p&gt;
\[
   P = \frac{y}{x} \tag{3}
\]&lt;p&gt;Effective reserve curve:&lt;/p&gt;
\[
   (x+\dfrac{L}{\sqrt{p_{b}}})(y+L\sqrt{p_{a}})=L^{2} \tag{4}
\]&lt;h3 id=&#34;2-derivation-of-the-effective-reserve-curve&#34;&gt;&lt;strong&gt;2. Derivation of the Effective Reserve Curve&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;&lt;img src=&#34;https://yearsuns-github-io.vercel.app/p/a-deep-dive-into-the-fundamental-principles-of-uniswaps-concentrated-liquidity/virtual_reserves.png&#34;
	width=&#34;1880&#34;
	height=&#34;1466&#34;
	srcset=&#34;https://yearsuns-github-io.vercel.app/p/a-deep-dive-into-the-fundamental-principles-of-uniswaps-concentrated-liquidity/virtual_reserves_hu_7f2418a223292b52.png 480w, https://yearsuns-github-io.vercel.app/p/a-deep-dive-into-the-fundamental-principles-of-uniswaps-concentrated-liquidity/virtual_reserves_hu_577fb5efdb443dce.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Figure 1 Virtual reserves&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;128&#34;
		data-flex-basis=&#34;307px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;As shown in Figure 1, the current price is at point c. Suppose the actual price movement range is \([a,b]\).&lt;/p&gt;
&lt;p&gt;When the price moves from c to a, the maximum pool consumption for token \(y\) is \(y_{real}\). Likewise, when price moves from c to b, the maximum pool consumption for token \(x\) is \(x_{real}\).&lt;/p&gt;
&lt;p&gt;Therefore, in theory, only \(x_{real}\) and \(y_{real}\) are required. All other funds are permanently unused, which also explains why the original xyk model has low capital efficiency.&lt;/p&gt;
&lt;p&gt;So the question is: what should the effective reserve curve actually look like?&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yearsuns-github-io.vercel.app/p/a-deep-dive-into-the-fundamental-principles-of-uniswaps-concentrated-liquidity/effective_reserves.png&#34;
	width=&#34;720&#34;
	height=&#34;592&#34;
	srcset=&#34;https://yearsuns-github-io.vercel.app/p/a-deep-dive-into-the-fundamental-principles-of-uniswaps-concentrated-liquidity/effective_reserves_hu_7e45aaaa6c8583ea.png 480w, https://yearsuns-github-io.vercel.app/p/a-deep-dive-into-the-fundamental-principles-of-uniswaps-concentrated-liquidity/effective_reserves_hu_d0a3c978ce198002.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Figure 2 Effective reserves&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;121&#34;
		data-flex-basis=&#34;291px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;As shown in Figure 2, we begin deriving the effective reserve curve.&lt;/p&gt;
&lt;p&gt;From the following formulas:&lt;/p&gt;
\[
   L^2 = xy \\
   P = \frac{y}{x}
\]&lt;p&gt;For anyone who has attended junior high school mathematics, multiplying and dividing both sides of the equations easily yields:&lt;/p&gt;
\[
\begin{aligned}
   x = \dfrac{L}{\sqrt{P}} \\
   y = L\sqrt{P} \tag{4}
\end{aligned}
\]&lt;p&gt;From Figure 1 we know:&lt;/p&gt;
\[
   x = x_{real} + x_b \\
   y = y_{real} + y_a
\]&lt;p&gt;Substituting into the xyk model (1):&lt;/p&gt;
\[
   (x_{real}+x_b)(y_{real}+y_a) = k = L^2
\]&lt;p&gt;Then substituting \(x_b, y_a\) using formula (4):&lt;/p&gt;
\[
   (x_{real}+\dfrac{L}{\sqrt{P_{b}}})(y_{real}+L\sqrt{P_{a}})=L^{2}
\]&lt;p&gt;This is the final formula of the effective reserve curve.&lt;/p&gt;
&lt;h3 id=&#34;3-calculating-liquidity-composition-changes&#34;&gt;&lt;strong&gt;3. Calculating Liquidity Composition Changes&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;After we provide liquidity, the contract starts performing trades. So how do we calculate the current allocation of assets inside our provided liquidity?&lt;/p&gt;
&lt;p&gt;Based on formula (4):&lt;/p&gt;
\[
\begin{aligned}
   x=\dfrac{L}{\sqrt{p}} \\
   y=L\sqrt{P} \tag{4}
\end{aligned}
\]&lt;p&gt;Let:&lt;/p&gt;
\[
\begin{aligned}
   S = \sqrt{P}
\end{aligned}
\]&lt;p&gt;Then:&lt;/p&gt;
\[
\begin{aligned}
   x = \dfrac{L}{S} \\
   y = L S
\end{aligned}
\]&lt;p&gt;Since L remains constant, differentiate with respect to S:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;For x:&lt;/strong&gt;&lt;/p&gt;
\[
x = \frac{L}{S}
\Rightarrow dx = -L \frac{1}{S^2} dS
\]&lt;p&gt;&lt;strong&gt;For y:&lt;/strong&gt;&lt;/p&gt;
\[
y = L S
\Rightarrow dy = L dS
\]&lt;p&gt;So we have two important differential relationships:&lt;/p&gt;
\[
dx = -L \frac{1}{S^2} dS,\qquad dy = L dS
\]&lt;p&gt;Suppose an LP‚Äôs effective price range is:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Lower price: \(P_a\), corresponding to \(S_a = \sqrt{P_a}\)&lt;/li&gt;
&lt;li&gt;Upper price: \(P_b\), corresponding to \(S_b = \sqrt{P_b}\)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Consider only the \(token_y\) change&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Inside the range, when S increases from \(S_a\) to \(S_b\):&lt;/p&gt;
\[
dy = L dS
\]&lt;p&gt;Integrate S from \(S_a\) to \(S_b\):&lt;/p&gt;
\[
\Delta y = \int_{S_a}^{S_b} L\, dS
= L (S_b - S_a)
= L(\sqrt{P_b} - \sqrt{P_a})
\]&lt;p&gt;This is &lt;strong&gt;the total amount of \(token_y\) corresponding to the entire interval \([P_a, P_b]\)&lt;/strong&gt;:&lt;/p&gt;
\[
amount_y = L(\sqrt{P_b} - \sqrt{P_a})
\]&lt;p&gt;&lt;strong&gt;Consider only \(token_x\)&lt;/strong&gt;&lt;/p&gt;
\[
dx = -L \frac{1}{S^2} dS
\]&lt;p&gt;Note that x decreases as S increases (price rises ‚Üí token_x decreases). We want the total amount in absolute value:&lt;/p&gt;
\[
\Delta x = \int_{S_a}^{S_b} L \frac{1}{S^2} dS
\]&lt;p&gt;Compute:&lt;/p&gt;
\[
\int \frac{1}{S^2} dS = -\frac{1}{S}
\]&lt;p&gt;Thus:&lt;/p&gt;
\[
\Delta x
= L\left[-\frac{1}{S}\right]_{S_a}^{S_b}
= L\left(-\frac{1}{S_b} + \frac{1}{S_a}\right)
= L\left(\frac{1}{S_a} - \frac{1}{S_b}\right)
\]&lt;p&gt;Substitute \(S = \sqrt{P}\):&lt;/p&gt;
\[
amount_x = L\left(\frac{1}{\sqrt{P_a}} - \frac{1}{\sqrt{P_b}}\right)
\]&lt;p&gt;This is the interval formula for \(token_x\).&lt;/p&gt;
&lt;p&gt;The above derivation covers total x/y in the entire interval \([P_a, P_b]\).
But the actual situation depends on where the current price lies:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Case A: Current price inside the range \((P_a &lt; P &lt; P_b)\)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;The position holds ‚Äúpart token0 and part token1‚Äù:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;For \(token_x\), effective interval is [P, P_b]:&lt;/p&gt;
\[
  amount_x = L\left(\frac{1}{\sqrt{P}} - \frac{1}{\sqrt{P_b}}\right)
  \]&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;For \(token_y\), effective interval is [P_a, P]:&lt;/p&gt;
\[
  amount_y = L(\sqrt{P} - \sqrt{P_a})
  \]&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Case B: Price below the range \((P \le P_a)\)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;The position has not ‚Äúmoved upward yet,‚Äù and is entirely in \(token_x\):&lt;/p&gt;
\[
amount_x = L\left(\frac{1}{\sqrt{P_a}} - \frac{1}{\sqrt{P_b}}\right) \\
amount_y = 0
\]&lt;p&gt;&lt;strong&gt;Case C: Price above the range \((P \ge P_b)\)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;The position has ‚Äúfully moved upward,‚Äù and is entirely \(token_y\):&lt;/p&gt;
\[
amount_x = 0 \\
amount_y = L(\sqrt{P_b} - \sqrt{P_a})
\]&lt;h3 id=&#34;4-calculating-the-actual-trading-price&#34;&gt;&lt;strong&gt;4. Calculating the Actual Trading Price&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;Now that we understand the trading principle and core formulas, when preparing to swap tokens through the pool, the assets we input will also affect the ratio between pool assets. Since \(P=\dfrac{y}{x}\) is only a theoretical price, how do we calculate the actual execution price? For example, how many USDC can 1 ETH be swapped for?&lt;/p&gt;
&lt;p&gt;When we put \(\Delta x\) ETH into the pool, USDC in the pool decreases by \(\Delta y\), and the corresponding price moves from \(P_0\) down to \(P_1\). So we have:&lt;/p&gt;
\[
\begin{aligned}
\Delta x &amp;= L\left(\frac{1}{\sqrt{P_1}} - \frac{1}{\sqrt{P_0}}\right) = L\left(\frac{1}{S_1} - \frac{1}{S_0}\right) 
\Rightarrow 
S_1 = \frac{1}{\dfrac{\Delta x}{L} + \dfrac{1}{S_0}} \\
\Delta y &amp;= L(\sqrt{P_0} - \sqrt{P_1}) = L(S_0 - S_1) = 
L\left(S_0 - \frac{1}{\dfrac{\Delta x}{L} + \dfrac{1}{S_0}}\right)
\end{aligned}
\]&lt;p&gt;where L is the active liquidity in the current price segment.&lt;/p&gt;
&lt;p&gt;If the trade size is large and crosses multiple ticks, split the swap into segments and apply the same method for each interval, summing all the Œîy values across each segment.&lt;/p&gt;
</description>
        </item>
        <item>
        <title>A Deep Dive into the Fundamental Principles of Uniswap‚Äôs XYK Model</title>
        <link>https://yearsuns-github-io.vercel.app/en/p/a-deep-dive-into-the-fundamental-principles-of-uniswaps-xyk-model/</link>
        <pubDate>Wed, 16 Jul 2025 14:59:56 +0800</pubDate>
        
        <guid>https://yearsuns-github-io.vercel.app/en/p/a-deep-dive-into-the-fundamental-principles-of-uniswaps-xyk-model/</guid>
        <description>&lt;blockquote&gt;
&lt;p&gt;XYK means: put a pair of assets into a ‚Äúpool‚Äù, and require that the product of the two asset amounts always stays equal: &lt;code&gt;x * y = k&lt;/code&gt;.
All swaps must follow this rule, and therefore &lt;strong&gt;price, slippage, yield and risk&lt;/strong&gt; all naturally come from this formula.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Let‚Äôs walk through the math step by step.&lt;/p&gt;
&lt;h2 id=&#34;1-traditional-trading-why-do-we-need-an-order-book&#34;&gt;1. Traditional Trading: Why Do We Need an Order Book?
&lt;/h2&gt;&lt;p&gt;In traditional exchanges, the core mechanism is the &lt;strong&gt;order book&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;A places a buy order at 100 for 1 ETH&lt;/li&gt;
&lt;li&gt;B places a sell order at 101 for 2 ETH&lt;/li&gt;
&lt;li&gt;The system matches orders and completes the trade&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;This design has several characteristics:&lt;/p&gt;
&lt;h3 id=&#34;1-requires-professional-market-makers&#34;&gt;1. Requires professional market makers
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;Without someone providing orders, ordinary traders cannot trade&lt;/li&gt;
&lt;li&gt;Market makers must watch the market and continuously update orders&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;2-requires-a-centralized-matching-engine&#34;&gt;2. Requires a centralized matching engine
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;Run by the exchange&lt;/li&gt;
&lt;li&gt;You have to &lt;strong&gt;trust&lt;/strong&gt; the intermediary&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;3-ordinary-users-cannot-participate-in-market-making-easily&#34;&gt;3. Ordinary users cannot participate in market-making easily
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;Hard to provide liquidity&lt;/li&gt;
&lt;li&gt;Most profits go to institutions&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;For blockchain, which emphasizes open participation, this is too centralized.&lt;/p&gt;
&lt;h2 id=&#34;2-amm-turning-market-making-into-a-liquidity-pool&#34;&gt;2. AMM: Turning Market Making into a Liquidity Pool
&lt;/h2&gt;&lt;p&gt;The innovation of AMM (Automated Market Maker) is transforming trading from order matching into a &lt;strong&gt;liquidity pool&lt;/strong&gt; that &lt;strong&gt;anyone&lt;/strong&gt; can join.&lt;/p&gt;
&lt;p&gt;A liquidity pool holds two assets (e.g., ETH and USDT) and follows:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;x * y = k
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;This is the &lt;strong&gt;XYK constant product market maker model&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;When someone buys ETH with USDT, ETH decreases and USDT increases, while keeping the product constant.&lt;/p&gt;
&lt;p&gt;AMM replaces the order book:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;no buy/sell orders&lt;/li&gt;
&lt;li&gt;no professional market makers&lt;/li&gt;
&lt;li&gt;no centralized matching engine&lt;/li&gt;
&lt;li&gt;anyone can join&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;So essentially:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;AMM = liquidity pool + mathematical rule&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Price, slippage and liquidity depth all follow from this.&lt;/p&gt;
&lt;h2 id=&#34;3-how-is-price-determined&#34;&gt;3. How Is Price Determined?
&lt;/h2&gt;&lt;p&gt;Example:&lt;/p&gt;
&lt;p&gt;Pool state:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ETH &lt;code&gt;x = 100&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;USDT &lt;code&gt;y = 10000&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Then the price is naturally:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;price = y / x = 10000 / 100 = 100 USDT
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Key points:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Price is not quoted manually&lt;/li&gt;
&lt;li&gt;Price changes automatically with pool state&lt;/li&gt;
&lt;li&gt;External arbitrage aligns the pool price to market price&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;So in AMM:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Price = asset ratio in pool&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;4-how-do-trades-change-price&#34;&gt;4. How Do Trades Change Price?
&lt;/h2&gt;&lt;h3 id=&#34;initial-state&#34;&gt;Initial State
&lt;/h3&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;x = 100 ETH
y = 10000 USDT
k = 1,000,000
P‚ÇÄ = 100
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;A user wants to spend &lt;strong&gt;1000 USDT to buy ETH&lt;/strong&gt;.&lt;/p&gt;
&lt;h3 id=&#34;transaction-rule&#34;&gt;Transaction rule
&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;Must satisfy &lt;code&gt;x * y = k&lt;/code&gt; before and after the swap&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;after-the-swap&#34;&gt;After the swap
&lt;/h3&gt;&lt;p&gt;User adds:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Œîy = +1000
y‚ÇÇ = 11000
x‚ÇÇ = 1,000,000 / 11000 ‚âà 90.909
Œîx ‚âà 9.091
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Average price ‚âà 110
Final price ‚âà 121&lt;/p&gt;
&lt;p&gt;You observe:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Average paid ‚âà 110&lt;/li&gt;
&lt;li&gt;Final price ‚âà 121&lt;/li&gt;
&lt;li&gt;Initial price = 100&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;That feeling of:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;‚ÄúI buy ‚Üí the price jumps!‚Äù&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;That is &lt;strong&gt;slippage&lt;/strong&gt;.&lt;/p&gt;
&lt;h2 id=&#34;5-slippage-not-a-fee-but-price-you-push-higher&#34;&gt;5. Slippage: Not a Fee, But Price You Push Higher
&lt;/h2&gt;&lt;p&gt;Slippage is not a fee:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;You moved the price by trading&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;You are literally buying along the curve from cheap ‚Üí expensive.
Bigger trades cause more slippage.&lt;/p&gt;
&lt;h2 id=&#34;6-why-bigger-pools-have-lower-slippage&#34;&gt;6. Why Bigger Pools Have Lower Slippage?
&lt;/h2&gt;&lt;p&gt;Compare:&lt;/p&gt;
&lt;h3 id=&#34;small-pool-100--10000&#34;&gt;Small pool: 100 / 10000
&lt;/h3&gt;&lt;p&gt;Price moves 100 ‚Üí 121&lt;/p&gt;
&lt;h3 id=&#34;big-pool-1000--100000&#34;&gt;Big pool: 1000 / 100000
&lt;/h3&gt;&lt;p&gt;Price moves 100 ‚Üí 102&lt;/p&gt;
&lt;p&gt;Conclusion:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;More liquidity ‚Üí milder price curve ‚Üí lower slippage&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;It&amp;rsquo;s like:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;a basin vs. a lake&lt;/li&gt;
&lt;li&gt;adding a bucket changes the level much more in a basin&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;7-what-exactly-is-liquidity&#34;&gt;7. What Exactly Is Liquidity?
&lt;/h2&gt;&lt;p&gt;Liquidity = actual asset amounts in the pool&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;more liquidity ‚Üí flatter curve ‚Üí stable prices&lt;/li&gt;
&lt;li&gt;less liquidity ‚Üí steep curve ‚Üí price impact increases&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Anyone can provide liquidity, therefore:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Market-making becomes open&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;8-how-do-you-join-as-a-liquidity-provider&#34;&gt;8. How Do You Join as a Liquidity Provider?
&lt;/h2&gt;&lt;p&gt;Pool state:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;x = 100 ETH
y = 10000 USDT
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Price = 100 USDT/ETH&lt;/p&gt;
&lt;p&gt;To add liquidity, you must deposit &lt;strong&gt;proportionally&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;add 1 ETH&lt;/li&gt;
&lt;li&gt;plus 100 USDT&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Otherwise you change the price.&lt;/p&gt;
&lt;p&gt;You receive &lt;strong&gt;LP tokens&lt;/strong&gt; representing your share.&lt;/p&gt;
&lt;p&gt;When you withdraw, you take &lt;strong&gt;a share of the pool&lt;/strong&gt;, not exactly what you put in.&lt;/p&gt;
&lt;p&gt;This is important for understanding impermanent loss.&lt;/p&gt;
&lt;h2 id=&#34;9-how-do-lps-earn-fees&#34;&gt;9. How Do LPs Earn Fees?
&lt;/h2&gt;&lt;p&gt;Each trade pays a small fee (e.g., 0.3%), and this fee:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;does NOT go to ‚Äúthe platform‚Äù&lt;/li&gt;
&lt;li&gt;goes into the pool&lt;/li&gt;
&lt;li&gt;distributed to LPs&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Think of it as:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Traders use your assets, and you charge toll fees&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;LP earnings:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;trading fees&lt;/li&gt;
&lt;li&gt;token incentives&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;10-impermanent-loss&#34;&gt;10. Impermanent Loss
&lt;/h2&gt;&lt;p&gt;LPs earn fees but face impermanent loss.&lt;/p&gt;
&lt;p&gt;Example pool:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;1 ETH + 100 USDT
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;You add:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;1 ETH + 100 USDT
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Pool:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;2 ETH + 200 USDT
(You own 50%)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;If ETH price falls, the pool becomes:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;4 ETH + 100 USDT
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;You withdraw:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;2 ETH + 50 USDT = 100 USDT value
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;You deposited value: 200
You withdraw value: 100&lt;/p&gt;
&lt;p&gt;You lose value because:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;pool moved toward the depreciating asset&lt;/li&gt;
&lt;li&gt;arbitrage takes the increasing asset out&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The pool automatically rebalances toward cheaper assets.&lt;/p&gt;
&lt;h2 id=&#34;11-what-problems-does-xyk-solve&#34;&gt;11. What Problems Does XYK Solve?
&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;No order book&lt;/li&gt;
&lt;li&gt;Price determined algorithmically&lt;/li&gt;
&lt;li&gt;Anyone can become a market maker&lt;/li&gt;
&lt;li&gt;Infrastructure becomes public and open&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;12-limitations--evolution&#34;&gt;12. Limitations &amp;amp; Evolution
&lt;/h2&gt;&lt;h3 id=&#34;xyk-drawbacks&#34;&gt;XYK drawbacks
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;Large slippage
‚Üí specialized stable-swap curves (Curve)&lt;/li&gt;
&lt;li&gt;Poor capital efficiency
‚Üí concentrated liquidity (Uniswap v3)&lt;/li&gt;
&lt;li&gt;Impermanent loss
‚Üí LP bears volatility risk&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Still:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;XYK is the entrance door to AMM design&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Understanding XYK makes everything else easier.&lt;/p&gt;
&lt;h2 id=&#34;13-the-one-simple-formula&#34;&gt;13. The One Simple Formula
&lt;/h2&gt;&lt;p&gt;Back to:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;x * y = k
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;From this follows:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;price: &lt;code&gt;P = y / x&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;slippage&lt;/li&gt;
&lt;li&gt;liquidity depth&lt;/li&gt;
&lt;li&gt;LP revenue&lt;/li&gt;
&lt;li&gt;impermanent loss&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;XYK is the &lt;strong&gt;F = ma of DeFi&lt;/strong&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;deceptively simple, yet the foundation of decentralized trading.&lt;/p&gt;
&lt;/blockquote&gt;
</description>
        </item>
        <item>
        <title>How Passwords Should Be Safely Transmitted and Stored</title>
        <link>https://yearsuns-github-io.vercel.app/en/p/how-passwords-should-be-safely-transmitted-and-stored/</link>
        <pubDate>Sun, 29 Jun 2025 14:59:56 +0800</pubDate>
        
        <guid>https://yearsuns-github-io.vercel.app/en/p/how-passwords-should-be-safely-transmitted-and-stored/</guid>
        <description>&lt;h2 id=&#34;1-introduction-passwords-are-the-last-line-of-defense-in-the-digital-world&#34;&gt;1. Introduction: Passwords Are the Last Line of Defense in the Digital World
&lt;/h2&gt;&lt;p&gt;In the entire ecosystem of internet security, passwords are the most common yet also the most fragile component.
Almost all services we use daily‚Äîemail, online banking, social platforms, games, forums‚Äîrely on passwords to authenticate user identity.&lt;/p&gt;
&lt;p&gt;A password is essentially a &lt;strong&gt;weak credential&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;It cannot prove who the user really is‚Äîit only proves that they ‚Äúknow a certain secret.‚Äù&lt;/li&gt;
&lt;li&gt;Once this secret is leaked, an attacker can completely impersonate you.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Modern cyberattacks are frequent and diverse. A single ordinary password leak often results in multiple accounts across different platforms being compromised.
To defend against these threats, we must strengthen both the &lt;strong&gt;transmission stage&lt;/strong&gt; and the &lt;strong&gt;storage stage&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;This article builds from fundamental concepts and gradually develops a complete, modern password security system.&lt;/p&gt;
&lt;h2 id=&#34;2-why-are-passwords-so-dangerous&#34;&gt;2. Why Are Passwords So Dangerous?
&lt;/h2&gt;&lt;p&gt;At first glance, a password is just a string composed of characters.
But the damage caused by a leaked password is far more severe than it seems, mainly for two reasons.&lt;/p&gt;
&lt;h3 id=&#34;21-risk-1-leakage-during-transmission&#34;&gt;2.1 Risk 1: Leakage During Transmission
&lt;/h3&gt;&lt;p&gt;From the moment a user enters a password until it reaches the server, the data passes through:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The browser&lt;/li&gt;
&lt;li&gt;Local DNS resolution&lt;/li&gt;
&lt;li&gt;OS network stack&lt;/li&gt;
&lt;li&gt;Routers&lt;/li&gt;
&lt;li&gt;ISP backbone&lt;/li&gt;
&lt;li&gt;Server load balancers&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;If &lt;strong&gt;any&lt;/strong&gt; part of this chain is compromised, the password could be intercepted.&lt;/p&gt;
&lt;p&gt;In theory, HTTPS solves the ‚Äúeavesdropping problem.‚Äù
But reality is more complex. Common risks include:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Malware installing fake root certificates (classic MITM strategy)&lt;/li&gt;
&lt;li&gt;Internal corporate/school networks performing TLS inspection&lt;/li&gt;
&lt;li&gt;Public Wi-Fi conducting ARP spoofing and re-signing HTTPS certificates&lt;/li&gt;
&lt;li&gt;Browser extensions injecting malicious scripts to read user input&lt;/li&gt;
&lt;li&gt;‚ÄúNetwork optimization‚Äù software adding hidden interception modules&lt;/li&gt;
&lt;li&gt;Enterprise gateways performing SSL inspection (legal but unsafe)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;In other words:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;You cannot assume the user‚Äôs device or network environment is always secure.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Therefore, there is room to improve the security of transmission.&lt;/p&gt;
&lt;h3 id=&#34;22-risk-2-server-side-leakage&#34;&gt;2.2 Risk 2: Server-side Leakage
&lt;/h3&gt;&lt;p&gt;Most leaks occur on the server side. Common scenarios include:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Database breaches (most common)&lt;/li&gt;
&lt;li&gt;Passwords accidentally printed in logs&lt;/li&gt;
&lt;li&gt;Developers outputting passwords during debugging&lt;/li&gt;
&lt;li&gt;Unencrypted backups mistakenly exposed to the public&lt;/li&gt;
&lt;li&gt;Third-party monitoring tools capturing sensitive fields&lt;/li&gt;
&lt;li&gt;Vulnerabilities (SQL injection, RCE) exposing the database&lt;/li&gt;
&lt;li&gt;Internal misuse of privileges by operations staff&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;If the server stores &lt;strong&gt;plaintext passwords&lt;/strong&gt;, the consequences are catastrophic:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;All user passwords are exposed&lt;/li&gt;
&lt;li&gt;Accounts on other websites are compromised due to password reuse&lt;/li&gt;
&lt;li&gt;If attackers access a user‚Äôs email, the impact escalates further&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Therefore, the server must ensure that &lt;strong&gt;even if a breach occurs, attackers cannot obtain the real passwords&lt;/strong&gt;.&lt;/p&gt;
&lt;h2 id=&#34;3-how-should-passwords-be-safely-transmitted-over-the-internet&#34;&gt;3. How Should Passwords Be Safely Transmitted Over the Internet?
&lt;/h2&gt;&lt;h3 id=&#34;31-the-most-straightforward-approach-send-the-password-directly-over-https&#34;&gt;3.1 The Most Straightforward Approach: Send the Password Directly Over HTTPS
&lt;/h3&gt;&lt;p&gt;This is the default method used by most websites today:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Browser ‚Äî‚ÄîHTTPS‚Äî‚Äî&amp;gt; Server
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Advantages:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Simple&lt;/li&gt;
&lt;li&gt;Mature&lt;/li&gt;
&lt;li&gt;Fast&lt;/li&gt;
&lt;li&gt;Compatible with everything&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The drawback is:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;It places all risk on the reliability of TLS.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;If TLS is compromised by a MITM attack, the password is exposed.&lt;/p&gt;
&lt;p&gt;Thus, some propose hashing the password &lt;strong&gt;on the client side first&lt;/strong&gt;.&lt;/p&gt;
&lt;h2 id=&#34;4-front-end-hashing-risks-reduced-and-risks-not-reduced&#34;&gt;4. Front-end Hashing: Risks Reduced and Risks Not Reduced
&lt;/h2&gt;&lt;p&gt;The core idea of front-end hashing is:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Even if the transmission is intercepted, the attacker does not get the real password.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Assume:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;P  = user password
H1 = hash(P)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;The browser sends H1 instead of P.&lt;/p&gt;
&lt;h3 id=&#34;41-what-can-front-end-hashing-protect-against&#34;&gt;4.1 What Can Front-end Hashing Protect Against?
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;Prevents MITM from obtaining the real password&lt;/li&gt;
&lt;li&gt;Prevents plaintext password leakage through server logs/monitoring&lt;/li&gt;
&lt;li&gt;Attackers cannot use H1 to log in to the user‚Äôs accounts on &lt;strong&gt;other&lt;/strong&gt; websites&lt;/li&gt;
&lt;li&gt;Even if users reuse passwords elsewhere, a breach of your site won‚Äôt cascade to others (very important)&lt;/li&gt;
&lt;li&gt;The server never touches plaintext passwords (a simple form of zero-knowledge authentication)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Front-end hashing provides:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;‚ÄúEven if your website is compromised, attackers still cannot learn users‚Äô real passwords for other services.‚Äù&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Traditional approaches cannot offer this.&lt;/p&gt;
&lt;h3 id=&#34;42-what-can-front-end-hashing-not-protect-against&#34;&gt;4.2 What Can Front-end Hashing &lt;em&gt;Not&lt;/em&gt; Protect Against?
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;Attackers can directly use H1 to log in to &lt;strong&gt;your&lt;/strong&gt; website (you treat it as the credential)&lt;/li&gt;
&lt;li&gt;Keyloggers / infected devices still capture P&lt;/li&gt;
&lt;li&gt;Hashes without challenge are vulnerable to replay attacks&lt;/li&gt;
&lt;li&gt;HTTPS is still required‚Äîhashes themselves must be encrypted&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;In short:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Front-end hashing reduces damage but does not eliminate risk.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;43-is-front-end-hashing-necessary&#34;&gt;4.3 Is Front-end Hashing Necessary?
&lt;/h3&gt;&lt;p&gt;In practice, it is an &lt;strong&gt;optional but clearly beneficial&lt;/strong&gt; enhancement.&lt;/p&gt;
&lt;p&gt;When implemented properly (with challenges to prevent replay), front-end hashing creates a dual defense:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;TLS ensures transport security&lt;/li&gt;
&lt;li&gt;Hashing reduces cross-site password reuse impact&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;High-security systems (banks, enterprise platforms, developer services) often use such mechanisms.&lt;/p&gt;
&lt;h2 id=&#34;5-how-should-servers-store-passwords&#34;&gt;5. How Should Servers Store Passwords?
&lt;/h2&gt;&lt;p&gt;Now to the core of password engineering:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Passwords must never appear in plaintext‚Äîeven inside the server.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Industry standards involve three key elements:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Hash&lt;/li&gt;
&lt;li&gt;Salt&lt;/li&gt;
&lt;li&gt;Slow hash&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;51-hashing-making-it-irreversible&#34;&gt;5.1 Hashing: Making It Irreversible
&lt;/h3&gt;&lt;p&gt;A good hashing function must:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Have extremely low collision probability&lt;/li&gt;
&lt;li&gt;Change output drastically when input changes slightly (avalanche effect)&lt;/li&gt;
&lt;li&gt;Make it impossible to reverse the input&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Servers store:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;H = hash(P)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;If the database leaks, attackers cannot directly obtain the password.&lt;/p&gt;
&lt;h3 id=&#34;52-salt-preventing-rainbow-tables-and-mass-cracking&#34;&gt;5.2 Salt: Preventing Rainbow Tables and Mass Cracking
&lt;/h3&gt;&lt;p&gt;Without salt, users with the same weak passwords produce identical hashes. Attackers can:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Use precomputed rainbow tables&lt;/li&gt;
&lt;li&gt;Test common passwords once to crack many accounts&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;By adding a random salt:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;H = hash(P + salt)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Now:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Two users with ‚Äú123456‚Äù have completely different hashes&lt;/li&gt;
&lt;li&gt;Rainbow tables become useless&lt;/li&gt;
&lt;li&gt;Attackers must brute-force each user individually (massively increasing cost)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Salt must be:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Long enough (‚â•16 bytes)&lt;/li&gt;
&lt;li&gt;Random (CSPRNG)&lt;/li&gt;
&lt;li&gt;Unique per user&lt;/li&gt;
&lt;li&gt;Stored in plaintext (not encrypted)&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;53-slow-hashing-truly-increasing-the-cost-of-attacks&#34;&gt;5.3 Slow Hashing: Truly Increasing the Cost of Attacks
&lt;/h3&gt;&lt;p&gt;Algorithms like SHA256 are far too fast.
Modern GPUs can compute billions of SHA256 hashes per second.&lt;/p&gt;
&lt;p&gt;Meaning:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Even with salt, SHA256-stored passwords can often be cracked quickly.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Thus, we must use slow hashing algorithms designed specifically for password storage:&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;Algorithm&lt;/th&gt;
          &lt;th&gt;Characteristics&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;bcrypt&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;Classic, mature&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;scrypt&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;GPU-resistant, high memory use&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;Argon2 (recommended)&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;Winner of password hashing competition; tunable CPU/memory/parallelism&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Slow hashing is not about ‚Äústronger hashing‚Äù; it&amp;rsquo;s about:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Making each guess expensive so attackers cannot perform massive brute-force attacks.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Login delays are negligible:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Users log in infrequently&lt;/li&gt;
&lt;li&gt;Each slow-hash costs only tens of milliseconds&lt;/li&gt;
&lt;li&gt;Attackers cannot scale up computations the same way&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;6-dual-protection-front-end-hash--back-end-slow-hash&#34;&gt;6. Dual Protection: Front-end Hash + Back-end Slow Hash
&lt;/h2&gt;&lt;p&gt;Combined:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;P ‚Üí H1 = hash1(P) ‚Üí (transmission) ‚Üí H2 = bcrypt(H1 + salt)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Dual-layer benefits:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;MITM capturing H1 cannot use it on other sites&lt;/li&gt;
&lt;li&gt;Database leaks revealing H2 are still hard to crack&lt;/li&gt;
&lt;li&gt;Server never touches plaintext passwords&lt;/li&gt;
&lt;li&gt;Logs and monitoring systems cannot leak P&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;This ‚Äúfront-end hash + back-end slow hash‚Äù model is used in high-security environments to reduce cascade risks.&lt;/p&gt;
&lt;h2 id=&#34;7-the-replay-attack-problem-of-front-end-hashing-and-its-solution&#34;&gt;7. The Replay Attack Problem of Front-end Hashing and Its Solution
&lt;/h2&gt;&lt;p&gt;If front-end hashing is simply:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;H1 = hash(P)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;An attacker who intercepts H1 can replay it indefinitely‚Äîalmost identical to stealing the real password.&lt;/p&gt;
&lt;h3 id=&#34;solution-use-a-random-challenge&#34;&gt;Solution: Use a &lt;strong&gt;random challenge&lt;/strong&gt;.
&lt;/h3&gt;&lt;h3 id=&#34;71-complete-workflow&#34;&gt;7.1 Complete Workflow
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;User opens login page&lt;/strong&gt;
The server generates a challenge:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;challenge = random string
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Browser computes:&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;H1 = hash(P + challenge)
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Server verifies:&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;bcrypt(H1 + salt) == stored_hash
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;72-benefits&#34;&gt;7.2 Benefits
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;H1 is different every time (challenge varies)&lt;/li&gt;
&lt;li&gt;Intercepted H1 cannot be reused&lt;/li&gt;
&lt;li&gt;MITM value decreases&lt;/li&gt;
&lt;li&gt;Server does not need to store challenge‚Äîjust verify once and discard&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;73-common-engineering-issues&#34;&gt;7.3 Common Engineering Issues
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;Challenge must not be cached (use no-cache)&lt;/li&gt;
&lt;li&gt;Must be long enough (‚â•16 bytes)&lt;/li&gt;
&lt;li&gt;Front-end must use secure hash (SHA256 or higher)&lt;/li&gt;
&lt;li&gt;Still requires HTTPS (challenge itself can be intercepted otherwise)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;8-additional-important-practices-often-overlooked&#34;&gt;8. Additional Important Practices (Often Overlooked)
&lt;/h2&gt;&lt;h3 id=&#34;81-never-email-users-their-passwords&#34;&gt;8.1 Never Email Users Their Passwords
&lt;/h3&gt;&lt;p&gt;Sending a new password via email is extremely dangerous.
Correct process:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Send a password reset link&lt;/li&gt;
&lt;li&gt;Link contains a one-time token&lt;/li&gt;
&lt;li&gt;User must set a new password&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;82-do-not-allow-weak-passwords&#34;&gt;8.2 Do Not Allow Weak Passwords
&lt;/h3&gt;&lt;p&gt;Weak passwords are exponentially easier to crack:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;123456&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;password&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;qwerty&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;User phone numbers&lt;/li&gt;
&lt;li&gt;User birthdays&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Use:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Blacklists of common passwords (top 10k)&lt;/li&gt;
&lt;li&gt;Length policies (‚â•12 chars)&lt;/li&gt;
&lt;li&gt;Encouragement of password managers&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;83-multi-factor-authentication-mfa--2fa&#34;&gt;8.3 Multi-factor Authentication (MFA / 2FA)
&lt;/h3&gt;&lt;p&gt;Passwords are only the first layer.
A second factor dramatically reduces attack success rates:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;TOTP (Google Authenticator)&lt;/li&gt;
&lt;li&gt;SMS codes (weaker, but still useful)&lt;/li&gt;
&lt;li&gt;Hardware keys (FIDO2 / U2F)&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;84-account-protection-features&#34;&gt;8.4 Account Protection Features
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;Lockouts after multiple failed attempts&lt;/li&gt;
&lt;li&gt;Suspicious-login email alerts&lt;/li&gt;
&lt;li&gt;Unusual IP/UA verification steps&lt;/li&gt;
&lt;li&gt;Recent login activity logs for user review&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;85-password-breach-checks-hibp-api&#34;&gt;8.5 Password Breach Checks (HIBP API)
&lt;/h3&gt;&lt;p&gt;Many large websites check whether:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;A user&amp;rsquo;s chosen password appears in known breach databases (like HaveIBeenPwned)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;This significantly reduces risk from weak password reuse.&lt;/p&gt;
&lt;h2 id=&#34;9-goals-of-a-modern-password-security-system&#34;&gt;9. Goals of a Modern Password Security System
&lt;/h2&gt;&lt;p&gt;With all steps combined, a modern password system should ensure:&lt;/p&gt;
&lt;h3 id=&#34;91-secure-transmission&#34;&gt;9.1 Secure Transmission
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;Use HTTPS&lt;/li&gt;
&lt;li&gt;Optional front-end hashing to prevent cascading leaks&lt;/li&gt;
&lt;li&gt;Challenge-based anti-replay&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;92-secure-storage&#34;&gt;9.2 Secure Storage
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;Never store plaintext passwords&lt;/li&gt;
&lt;li&gt;Unique salt per user&lt;/li&gt;
&lt;li&gt;Use slow hashing algorithms&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;93-account-protection&#34;&gt;9.3 Account Protection
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;Strong password policies&lt;/li&gt;
&lt;li&gt;MFA&lt;/li&gt;
&lt;li&gt;Anomaly detection&lt;/li&gt;
&lt;li&gt;Password leak comparison&lt;/li&gt;
&lt;li&gt;No sensitive info in logs&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The final objective:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Even if the entire server is compromised, attackers still cannot obtain any user&amp;rsquo;s real password.&lt;/p&gt;
&lt;/blockquote&gt;
</description>
        </item>
        <item>
        <title>Archives</title>
        <link>https://yearsuns-github-io.vercel.app/en/archives/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>https://yearsuns-github-io.vercel.app/en/archives/</guid>
        <description></description>
        </item>
        <item>
        <title>Search</title>
        <link>https://yearsuns-github-io.vercel.app/en/search/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>https://yearsuns-github-io.vercel.app/en/search/</guid>
        <description></description>
        </item>
        <item>
        <title>ÂÖ≥‰∫éÁ´ôÈïø</title>
        <link>https://yearsuns-github-io.vercel.app/en/about/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>https://yearsuns-github-io.vercel.app/en/about/</guid>
        <description>&lt;h3 id=&#34;Á´ôÈïøÊòØË∞Å&#34;&gt;Á´ôÈïøÊòØË∞ÅÔºü
&lt;/h3&gt;&lt;p&gt;Ê±üÊπñ‰∫∫Áß∞ÁéãÁ¶ªË∞±ÔºåITÁïåÁöÑÊ∞îÊ∞õÁªÑÔºåÁ¶ªË∞±ÁïåÁöÑÊâõÊääÂ≠êÔºåÊ≤ôÈõïÁïåÁöÑ‰∏ªÂøÉÈ™®„ÄÇ&lt;br&gt;
ÊõæÊòØÂÖ®ËÅå‰∫åÊâãÁ†ÅÂÜúÔºåÂõ†&lt;strong&gt;‰∏çÂñÑÂä†Áè≠&lt;/strong&gt;ÔºåÊãíÁªùICUÂ•óÈ§êÔºåÂ§±Ë∂≥ËêΩÂÖ•Ëá™Áî±ËÅå‰∏öÔºåÊ¥ªÊØîÁâõÈ©¨Â§öÔºåÊ¥ªÂæóÊØîÁâõÈ©¨Á¥Ø„ÄÇ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Ëç£Ë™âÂ§¥Ë°î&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;2006Âπ¥ÁæéÂõΩÊó∂‰ª£Âë®ÂàäÂπ¥Â∫¶È£é‰∫ë‰∫∫Áâ©&lt;/li&gt;
&lt;li&gt;„ÄäÊÑüÂä®‰∏≠ÂõΩ„Äã2008Âπ¥Â∫¶‰∫∫Áâ©ÁâπÂà´Â•ñ&lt;/li&gt;
&lt;li&gt;ËÅîÂêàÂõΩ2019Âπ¥Â∫¶‚ÄùÂú∞ÁêÉÂç´Â£´‚ÄúËÅîÂêàËé∑Â•ñ‰∫∫&lt;/li&gt;
&lt;li&gt;2022Âπ¥Â••ÊûóÂåπÂÖãÊùØËé∑ÂæóËÄÖ&lt;/li&gt;
&lt;li&gt;ËØ∫Ë¥ùÂ∞îÊñáÂ≠¶Â•ñËØªËÄÖ&lt;/li&gt;
&lt;li&gt;Ê∏ÖÂçéÂ§ßÂ≠¶ÊâÄÂú®ÂõΩÂ≠¶Áîü&lt;/li&gt;
&lt;li&gt;‰∏ñÁïå500Âº∫‰ºÅ‰∏öÁÆÄÂéÜÊäïÈÄíËÄÖ&lt;/li&gt;
&lt;li&gt;ÂÖ±ÂíåÂõΩÈ©¨ÂêéÁÇÆÁÇÆÊâãËç£Ë™âÂããÁ´†Ëé∑ÂæóËÄÖ&lt;/li&gt;
&lt;li&gt;ÂõΩÂÆ∂Ê≤ôÈõïËâ∫ÊúØÈùûÁâ©Ë¥®ÊñáÂåñ‰º†Êâø‰∫∫&lt;/li&gt;
&lt;li&gt;ÂõΩÂÆ∂ÁâπÁ∫ßÈÄÄÂ†ÇÈºìË°®ÊºîËâ∫ÊúØÂÆ∂&lt;/li&gt;
&lt;li&gt;ÂõΩÂÆ∂ÁâπÁ∫ßÂî±ÂèçË∞ÉË°®ÊºîËâ∫ÊúØÂÆ∂&lt;/li&gt;
&lt;li&gt;ÂõΩÂÆ∂‰∏ÄÁ∫ßÊä¨Êù†ËøêÂä®Âëò&lt;/li&gt;
&lt;li&gt;ÂõΩÂÆ∂‰∏ÄÁ∫ßÊì¶ËæπÁêÉÊïôÁªÉ&lt;/li&gt;
&lt;li&gt;ÂõΩÂÆ∂‰∏ÄÁ∫ßÂ•∂Ëå∂ÂìÅÈâ¥Â∏à&lt;/li&gt;
&lt;li&gt;‰∏¥Êó∂Êä±‰ΩõËÑöÂçè‰ºö‰ºöÈïø&lt;/li&gt;
&lt;li&gt;‰∏≠ÂõΩÈ©∞ÂêçÂèåÊ†áÂ∑•Á®ãÊÄªË¥üË¥£‰∫∫&lt;/li&gt;
&lt;li&gt;ÁôΩÊó•Ê¢¶ÂÖ®ÁêÉÊÄªÂÜ†ÂÜõ&lt;/li&gt;
&lt;li&gt;ÁæéÂõæÁßÄÁßÄÁâπÁ∫¶ÈÄ†ÂûãÂ∏à&lt;/li&gt;
&lt;li&gt;Èó≠Èó®ÁæπÁâπÁ∫ßÁÉπÈ•™Â∏à&lt;/li&gt;
&lt;li&gt;Â¢ôÂ§¥ËçâÊ†ΩÂüπ‰∏ìÂÆ∂&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;Âª∫Á´ôÁöÑÂàùË°∑&#34;&gt;Âª∫Á´ôÁöÑÂàùË°∑
&lt;/h3&gt;&lt;p&gt;Ëøô‰∏™Â∞èÁ†¥Á´ôÁöÑ‰ΩøÂëΩÊúâ‰∏âÔºö&lt;strong&gt;ÂàÜ‰∫´Áü•ËØÜ„ÄÅÂàÜ‰∫´ËßÅËß£„ÄÅÂàÜ‰∫´ÁîüÊ¥ª&lt;/strong&gt;„ÄÇ&lt;br&gt;
‰ø°Â•â‚ÄúÂä©‰∫∫ËÄÖÔºå‰∫∫ÊÅíÂä©‰πã‚ÄùÔºåÂ∏åÊúõËøô‰∏™Âú∞Êñπ‰∏ç‰ªÖËÉΩÂ∏ÆÂà∞Âà´‰∫∫Ôºå‰πüËÉΩÈÅáËßÅÊõ¥Â§öÂøóÂêåÈÅìÂêàÁöÑÊúãÂèãÔºå‰∏ÄËµ∑ÊêûÈí±„ÄÅÂÖ±ÂêåÈÄêÊ¢¶ÔºåËÆ©Ê¢¶ÊÉ≥ÁÖßËøõÁé∞ÂÆûÔºåËÄå‰∏çÊòØÁªßÁª≠Ë∫∫Âú®Ë¥≠Áâ©ËΩ¶Èáå„ÄÇ&lt;/p&gt;
&lt;h3 id=&#34;Êú™Êù•ÁöÑËÆ°Âàí&#34;&gt;Êú™Êù•ÁöÑËÆ°Âàí
&lt;/h3&gt;&lt;p&gt;Á¥ßË∑üAIÊµ™ÊΩÆÔºå&lt;strong&gt;ÊêûÊõ¥Â§öÁöÑÈí±ÔºåÂ∏ÆÊõ¥Â§öÁöÑ‰∫∫ÔºåË£ÖÊõ¥Â§öÁöÑX&lt;/strong&gt;„ÄÇ&lt;/p&gt;
&lt;h3 id=&#34;‰∏ÄÂè•ÊÉ≥ËØ¥ÁöÑËØù&#34;&gt;‰∏ÄÂè•ÊÉ≥ËØ¥ÁöÑËØù
&lt;/h3&gt;&lt;p&gt;ÁùÅÁúºËßÇ‰∏ñÁïåÔºåÈó≠Áúº‰∏ñÁïåËßÇ„ÄÇ&lt;/p&gt;
&lt;h3 id=&#34;ËØ∑Á´ôÈïøÂñùÊùØÂíñÂï°&#34;&gt;ËØ∑Á´ôÈïøÂñùÊùØÂíñÂï°
&lt;/h3&gt;&lt;p&gt;‚òï Ë¶Å‰πàËÆ©ÂíñÂï°ÁáÉËµ∑ÊàëÁöÑÁÅµÊÑüÔºåüëªË¶Å‰πàËÆ©È¶ôÁÅ´ÁÇπÁáÉÊàëÁöÑÁÅµÂ†ÇÔºÅ&lt;br&gt;
&lt;img src=&#34;https://yearsuns-github-io.vercel.app/about/wechat_payment.png&#34;
	width=&#34;261&#34;
	height=&#34;256&#34;
	srcset=&#34;https://yearsuns-github-io.vercel.app/about/wechat_payment_hu_7110ac74c750e57.png 480w, https://yearsuns-github-io.vercel.app/about/wechat_payment_hu_2b8d77efea6a55db.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;ÂæÆ‰ø°Êâ´Á†Å&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;101&#34;
		data-flex-basis=&#34;244px&#34;
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;ËÅîÁ≥ªÁ´ôÈïø&#34;&gt;ËÅîÁ≥ªÁ´ôÈïø
&lt;/h3&gt;&lt;p&gt;ËØ∑ËÄÅÁà∑Áî®Â§ßÂ§ßÁöÑÁ∫¢ÂåÖüßßÊù•ÁæûËæ±ÊàëÂêßÔºÅ&lt;br&gt;
&lt;img src=&#34;https://yearsuns-github-io.vercel.app/about/wechat_qr_code.png&#34;
	width=&#34;256&#34;
	height=&#34;256&#34;
	srcset=&#34;https://yearsuns-github-io.vercel.app/about/wechat_qr_code_hu_22b9b81a6e95acf2.png 480w, https://yearsuns-github-io.vercel.app/about/wechat_qr_code_hu_73fe7de4344e69f.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;ÂæÆ‰ø°Êâ´Á†Å&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;100&#34;
		data-flex-basis=&#34;240px&#34;
	
&gt;&lt;/p&gt;
</description>
        </item>
        
    </channel>
</rss>
